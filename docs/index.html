<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="ipynb_website:version" content="0.9.7" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>SuSiE manuscript</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="site_libs/highlightjs/null.min.css"
      type="text/css" />

<script src="site_libs/highlightjs/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>
<style type="text/css">
  div.input_prompt {display: none;}
  div.output_html {
     font-family: "PT Mono", monospace;
     font-size: 10.0pt;
     color: #353535;
     padding-bottom: 25px;
 }
  pre:not([class]) {
    background-color: white;
  }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'] ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["TeX"],
            styles: {
                scale: 110,
                ".MathJax_Display": {
                    "font-size": "110%",
                }
            }
        }
    });
</script>

</head>

<body>
<style type = "text/css">
@font-face {
 font-family: 'Droid Sans';
 font-weight: normal;
 font-style: normal;
 src: local('Droid Sans'), url('fonts/droid-sans.ttf') format('truetype');
}
@font-face {
 font-family: 'Fira Code';
 font-weight: normal;
 font-style: normal;
 src: local('Fira Code'), url('fonts/firacode.otf') format('opentype');
}
@font-face {
 font-family: 'PT Mono';
 font-weight: normal;
 font-style: normal;
 src: local('PT Mono'), url('fonts/ptmono.ttf') format('truetype');
}

body {
  
  font-size: 160%;
  padding-top: 66px;
  padding-bottom: 40px;
}

h1, h2, h3, h4, h5, h6 {
  margin-top: 20px;
 }

a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}

h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: hidden;
}

.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->

<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">SuSiE manuscript</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
<li>
  <a href="./index.html">Overview</a>
</li>
        
<li>
  <a href="./finemapping_benchmark.html">Finemapping Benchmark</a>
</li>
        
<li>
  <a href="./manuscript_results.html">Manuscript Results</a>
</li>
        
      </ul>
    
<ul class="nav navbar-nav navbar-right">
<li>
   <a href="http://github.com/stephenslab/susie-paper"> source </a>
</li>
</ul>
        
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Code-and-data-accompanying-SuSiE-manuscript-(Wang-et-al,-2018)">Code and data accompanying SuSiE manuscript (Wang et al, 2018)<a class="anchor-link" href="#Code-and-data-accompanying-SuSiE-manuscript-(Wang-et-al,-2018)">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Overview">Overview<a class="anchor-link" href="#Overview">&#182;</a></h2><p>This repository contains code and data resources to accompany our research paper:</p>
<blockquote><p>Wang, G., Sarkar, A., Carbonetto, P., &amp; Stephens, M. (2020). A simple new approach to variable selection in regression, with application to genetic fine mapping. Journal of the Royal Statistical Society: Series B (Statistical Methodology). <a href="https://doi.org/10.1111/rssb.12388">https://doi.org/10.1111/rssb.12388</a></p>
</blockquote>
<p>We provide several sets of resources:</p>
<ol>
<li><p>If you are primarily interested in applying SuSiE to your own data in a generic setting, please check out the <a href="https://stephenslab.github.io/susieR">susieR package</a>. A good place to start is the <a href="https://stephenslab.github.io/susieR/articles/index.html">vignettes</a>.</p>
</li>
<li><p>To help understanding how SuSiE works we demonstrate here code and results for <a href="manuscript_results/pedagogical_example.html">the fine-mapping challenge</a> presented in the "Numerical Comparsions" section of our paper. Additionally the <a href="manuscript_results/motivating_example.html">notebook here</a> implementing the example described in the "Background and motivations" section our the manuscript, illustrate with a simple example the inference problem which motivated the development of SuSiE.</p>
</li>
<li><p>If you would like to reproduce the fine-mapping benchmark of SuSiE with other methods (CAVIAR, FINEMAP and DAP-G), please see <a href="finemapping_benchmark.html">here</a> for our implementation in the Dynamic Statistical Comparison framework, and <a href="manuscript_results/numerical_results.html">here</a> to reproduce figures in the "Numerical Comparisons" section of the manuscript.</p>
</li>
<li><p>If you would like to use SuSiE for fine-mapping of molecular traits similar to our data application of association analysis of splice QTL data please see <a href="manuscript_results/Li_2016_splice_QTL.html">our analysis of Li et al 2016 data</a> for details: we provide a fine-mapping pipeline with SuSiE and DAP-G, and a splicing QTL enrichment analysis pipeline for SuSiE signals in functional regions in genome. Although not used by the manuscript there is an additional enrichment pipeline we provide for matched analysis for other molecular QTLs (not applicable to splicing QTL) as suggested in Li et al 2016. A series of commandlines were provided on the page to reproduce the data application section of the manuscript using these pipelines.</p>
</li>
<li><p>You can explore the <a href="manuscript_results/changepoint_example.html">example on change-point problem</a> to learn about application of SuSiE for more generic problems.</p>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Software-requirement-and-general-instructions-to-reproduce-SuSiE-manuscript-results">Software requirement and general instructions to reproduce SuSiE manuscript results<a class="anchor-link" href="#Software-requirement-and-general-instructions-to-reproduce-SuSiE-manuscript-results">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Please note that this setup instruction is meant to reproduce the software environment that we have used to generate results for our manuscript. It involves a specific, and now out-dated release of <code>susieR</code>, as well as many other software packages we have compared. If your interest is to analyze data with SuSiE or to evaluate its current, most up-to-date version, please ignore the docker setup instruction on this page and instead follow the setup instructions on <a href="https://github.com/stephenslab/susieR"><code>susieR</code> software repository</a>.</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In addition to <code>susieR</code>, software required to reproduce numerical comparisons in the manuscript are <code>CAVIAR</code>, <code>FINEMAP</code> and <code>DAP-G</code>, and a benchmarking tool <a href="https://stephenslab.github.io/dsc-wiki/"><code>dsc</code></a>. To reproduce the splicing QTL data analysis a bioinformatics pipeline tool <a href="https://github.com/vatlab/SoS"><code>SoS</code></a> is needed.</p>
<p>Of course with some work it is possible to setup the computational environment on a Linux or Mac computer to reproduce &amp; extend our work. Alternatively, we have developed <a href="https://github.com/stephenslab/susie-paper/blob/master/Dockerfile">a docker image</a> that includes all software components necessary to run the analyses, configured to specified versions used in the manuscript. The image can be used both for evaluating the manuscript and for use in production. Unfortunately due to potential licensing restrictions with the <code>FINEMAP</code> program we cannot distribute the docker container on dockerhub. However it is straightforward to build and the docker image by yourself. In the rest of this section we discuss building and using the docker image for the manuscript.</p>
<p>Docker can run on
most popular operating systems (Mac, Windows and Linux) and cloud
computing services such as Amazon Web Services and Microsoft Azure. If
you have not used Docker before, you might want to read
<a href="https://docs.docker.com/engine/docker-overview">this</a> to learn the basic concepts and understand the
main benefits of Docker.</p>
<p>If you find a bug in any of these steps, please post an
<a href="https://github.com/stephenslab/susie-paper/issues">issue</a>.</p>
<h3 id="Download-and-install-Docker">Download and install Docker<a class="anchor-link" href="#Download-and-install-Docker">&#182;</a></h3><p>Download <a href="https://docs.docker.com/install">Docker</a> (note that a free
<a href="https://www.docker.com/community-edition">community edition</a> of Docker is available), and install it
following the instructions provided on the Docker website. Once you
have installed Docker, check that Docker is working correctly by
following Part 1 of the <a href="https://docs.docker.com/get-started">"Getting Started" guide</a>.
If you are new to Docker, we recommend reading the entire "Getting
Started" guide.</p>
<p><strong>Note:</strong> Setting up Docker requires that you have administrator
access to your computer. <a href="https://singularity.lbl.gov/docs-docker">Singularity</a> is an
alternative that accepts Docker images and does not require
administrator access.</p>
<h3 id="Build-the-docker-image">Build the docker image<a class="anchor-link" href="#Build-the-docker-image">&#182;</a></h3><p>Under the root of the repository where <code>Dockerfile</code> is located,</p>
<div class="highlight"><pre><span></span>docker build -t susie/susie-paper .
</pre></div>
<p>It will take a while (&gt; 30min) to download and install the system and required software.</p>
<h3 id="Test-the-docker-build">Test the docker build<a class="anchor-link" href="#Test-the-docker-build">&#182;</a></h3><p>Run this <code>alias</code> command in the shell, which will be used below to run
commands inside the Docker container:</p>
<div class="highlight"><pre><span></span><span class="nb">alias</span> susie-docker<span class="o">=</span><span class="s1">&#39;docker run --security-opt label:disable -t --rm &#39;</span><span class="se">\</span>
<span class="s1">&#39;-P -h SuSiE -w $PWD -v $HOME:/home/$USER -v /tmp:/tmp -v $PWD:$PWD &#39;</span><span class="se">\</span>
<span class="s1">&#39;-u $UID:${GROUPS[0]} -e HOME=/home/$USER -e USER=$USER susie/susie-paper&#39;</span>
</pre></div>
<p>The <code>-v</code> flags in this command map directories between the standard
computing environment and the Docker container. Since the analyses
below will write files to these directories, it is important to ensure
that:</p>
<ul>
<li><p>Environment variables <code>$HOME</code> and <code>$PWD</code> are set to valid and
writeable directories (usually your home and current working
directories, respectively).</p>
</li>
<li><p><code>/tmp</code> should also be a valid and writeable directory.</p>
</li>
</ul>
<p>If any of these statements are not true, please adjust the <code>alias</code>
accordingly. The remaining options only affect operation of the
container, and so should function the same regardless of your operating
system.</p>
<p>Next, run a simple command in the Docker container to check that has
loaded successfully:</p>

<pre><code>susie-docker uname -sn</code></pre>
<p>If the container was successfully run, you should see this information
about the Docker container outputted to the screen:</p>

<pre><code>Linux SuSiE</code></pre>
<p>You can also run these commands to show the information about the
image downloaded to your computer and the container that has run
(and exited):</p>
<div class="highlight"><pre><span></span>docker image list
docker container list --all
</pre></div>
<p><em>Note:</em> If you get error "Cannot connect to the Docker daemon. Is the
docker daemon running on this host?" in Linux or macOS, see
<a href="https://askubuntu.com/questions/477551/how-can-i-use-docker-without-sudo">here for Linux</a>
or <a href="https://github.com/wodby/docker4drupal/issues/15">here for Mac</a> for
suggestions on how to resolve this issue.</p>
<h3 id="Reproducing-SuSiE-manuscript-results">Reproducing SuSiE manuscript results<a class="anchor-link" href="#Reproducing-SuSiE-manuscript-results">&#182;</a></h3><p>Simply add <code>susie-docker</code> at the beginning of all commands documented in other documentation pages this repository to indicate the commands are to be executed from software in the docker image. For example to export benchmark code and run the numerical comparions, the documented command is:</p>
<div class="highlight"><pre><span></span>./export.sos
dsc susie.dsc --target run_comparison -o toy_comparison
</pre></div>
<p>To run from docker,</p>
<div class="highlight"><pre><span></span>susie-docker ./export.sos
susie-docker dsc susie.dsc --target run_comparison -o toy_comparison
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Citing-this-repository">Citing this repository<a class="anchor-link" href="#Citing-this-repository">&#182;</a></h2><p>If you find any of the source code in this repository useful for your work, please cite our manuscript, Wang et al (2018). The full citation is given above. Please also cite the Zenodo archive for this repository:</p>
<blockquote><p>Gao Wang, Abhishek Sarkar, Peter Carbonetto and Matthew Stephens (2018), Code and data accompanying SuSiE manuscript (Wang et al, 2018), version 1.0, Zenodo, <a href="https://doi.org/10.5281/zenodo.2368676">doi:10.5281/zenodo.2368676</a>.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="License">License<a class="anchor-link" href="#License">&#182;</a></h2><p>Copyright (c) 2017-2018, Gao Wang, Abhishek Sarkar, Peter Carbonetto and Matthew Stephens.</p>
<p>All source code and software in this repository are made available under the terms of the <a href="https://opensource.org/licenses/mit-license.html">MIT license</a>.</p>

</div>
</div>
</div>
<hr>
&copy 2017-2018 authored by Gao Wang at Stephens Lab, The University of Chicago
<!-- To enable disqus, uncomment the section below and provide your disqus_shortname -->

</div>

<script>
// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
